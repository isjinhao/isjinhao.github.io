<!-- build time:Tue Apr 09 2019 12:46:20 GMT+0800 (GMT+08:00) -->---
abbrlink: 0
---<html><head><meta name="generator" content="Hexo 3.8.0"></head><body><video id="video" width="320" height="240" autoplay></video><button id="snap" class="sexyButton">Snap Photo</button><canvas id="canvas" width="320" height="240" style="display:none"></canvas><img id="snapimg" width="320" height="240"><script>function createRequest(){try{request=new XMLHttpRequest}catch(e){try{request=new ActiveXObject("Msxm12.XMLHTTP")}catch(t){try{request=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){request=null}}}return request}function uploadPhoto(){if(request=createRequest(),null==request)alert("Unable to create request");else{var e=document.getElementById("snapimg").src;e=e.substr(22),e=e.replace(/\+/g,"%2B");var t="UploadPic.aspx";request.open("POST",t,!0),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.onreadystatechange=responses,request.send("&img="+e)}}function responses(){4==request.readyState&&200==request.status&&("OK"==request.responseText?alert("上传成功！"):(alert("上传失败！"),alert(request.responseText)))}window.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),r=document.getElementById("video"),n={video:!0},a=function(e){console.log("Video capture error: ",e.code)};navigator.getUserMedia?navigator.getUserMedia(n,function(e){r.src=e,r.play()},a):navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia(n,function(e){r.src=window.webkitURL.createObjectURL(e),r.play()},a),document.getElementById("snap").addEventListener("click",function(){t.drawImage(r,0,0,320,240);var n=e.toDataURL();document.getElementById("snapimg").src=n,uploadPhoto()})},!1)</script></body></html><!-- rebuild by neat -->